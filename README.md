# Elastic + Filebeat для журнала регистрации 1С (docker)

![Консоль кода](https://github.com/salexdv/git_images/blob/master/elastic_eventlog.png?raw=true)

## Описание

Набор из трех контейнеров (Elastic + Kibana + Filebeat), предназначенный для обработки журнала регистрации в формате XML, запускаемый с помощью [Docker Compose](https://docs.docker.com/compose/). За чтение и преобразование логов полностью отвечает [Filebeat](https://www.elastic.co/beats/filebeat), Logstash не используется совсем.

## Использование, настройки, особенности

* Для выгрузки файлов с данными журнала регистрации можно использовать обработку [UnloadEventLog.epf](1c/UnloadEventLog.epf), которая в том числе может быть подключена в качестве внешней в конфигурациях с БПС. Выгрузку можно осуществлять вручную, либо настроить расписание для вызова серверного метода.

* Файлы логов следует выгружать в каталог `eventlog`

* Настройки разбора логов находятся в файле [eventlog_1c.yml](filebeat/eventlog_1c.yml)

* Удаление старых логов не предусмотрено, но только пока.

## Запуск

```bash
docker-compose up -d
```

* После успешного запуска Kibana будет доступна по адресу [http://localhost:5601](http://localhost:5601)

## Настройки Elastic и Kibana

Настройки шаблонов индексов, их жизненных циклов, а также дашбордов это отдельная большая история.
